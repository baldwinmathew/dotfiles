# If not running interactively, don't do anything
if [[ -n "$PS1" ]] ; then
    export EDITOR=vim
    export ARCHFLAGS="-arch x86_64"
    export NOWELLS_DEFAULT_COLOR="[00m"
    export NOWELLS_GRAY_COLOR="[37m"
    export NOWELLS_PINK_COLOR="[35m"
    export NOWELLS_GREEN_COLOR="[32m"
    export NOWELLS_ORANGE_COLOR="[33m"
    export NOWELLS_RED_COLOR="[31m"
    if [ `id -u` == '0' ]; then
        export NOWELLS_USER_COLOR=$NOWELLS_RED_COLOR
    else
        export NOWELLS_USER_COLOR=$NOWELLS_PINK_COLOR
    fi
    NOWELLS_VCPROMPT_EXECUTABLE=~/bin/vcprompt

    nowells_vcprompt() {
      $NOWELLS_VCPROMPT_EXECUTABLE -f $' on \033[34m%n:\033[35m%[unknown]b\033[32m'
    }

    export NOWELLS_BASEPROMPT='\n\e${NOWELLS_USER_COLOR}\u \
\e${NOWELLS_GRAY_COLOR}at \e${NOWELLS_ORANGE_COLOR}\h \
\e${NOWELLS_GRAY_COLOR}in \e${NOWELLS_GREEN_COLOR}\w\
\e${NOWELLS_GRAY_COLOR}$(nowells_vcprompt)\
\e${NOWELLS_ORANGE_COLOR} $(~/.rvm/bin/rvm-prompt i v p g)\
\e${NOWELLS_DEFAULT_COLOR}'
    export PS1="${NOWELLS_BASEPROMPT}
$ "
    export PROMPT_COMMAND="~/.bashrc.d/prompt_command"

    export BASE_TERM=$TERM
    export GREP_OPTIONS='--color=auto' GREP_COLOR='1;32'
    export CLICOLOR=1
    export LSCOLORS=ExGxFxDxCxHxHxCbCeEbEb
    export LC_CTYPE=en_US.utf-8
    export PATH=~/bin:/usr/local/sbin:/usr/local/bin:~/.local/bin/:$PATH
    export PATH=$PATH:/usr/local/mysql/bin
    export IGNOREEOF=1
    export PYTHONDONTWRITEBYTECODE=1
    export PIP_DOWNLOAD_CACHE=~/tmp/pip
    export PIP_REQUIRE_VIRTUALENV=true
    export LESS=FRSX

    # Mapnik
    export PYTHONPATH=/Library/Frameworks/Mapnik.framework/Python:$PYTHONPATH
    export PATH=/Library/Frameworks/Mapnik.framework/Programs:$PATH

    # virtualenvwrapper and pip
    if [ `id -u` != '0' ]; then
        export VIRTUALENV_USE_DISTRIBUTE=1
        export VIRTUALENVWRAPPER_PYTHON=/Library/Frameworks/Python.framework/Versions/2.6/bin/python
        export WORKON_HOME=$HOME/.virtualenvs
        source /usr/local/bin/virtualenvwrapper.sh
        export PIP_VIRTUALENV_BASE=$WORKON_HOME
        export PIP_RESPECT_VIRTUALENV=true
    fi

    # Aliases
    alias rvim="gvim --remote-silent"
    alias emacs='echo "You are trying to learn vi... type \`vi\` instead."'
    alias em="emacs"
    alias ll="ls -alh"
    alias vi="/Applications/MacVim.app/Contents/MacOS/vim"
    alias vim="/Applications/MacVim.app/Contents/MacOS/vim"
    alias wget="wget --no-check-certificate"
    alias tmux="TERM=screen-256color-bce tmux"

    shopt -s histappend

    export JAVA_HOME=/System/Library/Frameworks/JavaVM.framework/Versions/1.6/Home
    export PATH=/System/Library/Frameworks/JavaVM.framework/Versions/1.6/Home/bin:$PATH
    export NODE_PATH=$NODE_PATH:/usr/local/lib/node
    export PATH=$PATH:/usr/local/share/npm/bin

    # This needs to be xterm-256color-bce as opposed to xterm-256color for tmux/screen
    # to allow for redrawing of bg color
    #export TERM="xterm-256color"

    if [ -f `brew --prefix`/etc/bash_completion ]; then
        . `brew --prefix`/etc/bash_completion
    fi

    . ~/.bashrc.d/git-completion.bash
    . ~/.bashrc.d/rails.bash

    [[ -s "$HOME/.rvm/scripts/rvm" ]] && source "$HOME/.rvm/scripts/rvm"  # This loads RVM into a shell session.
    [[ -r $rvm_path/scripts/completion ]] && . $rvm_path/scripts/completion
fi
